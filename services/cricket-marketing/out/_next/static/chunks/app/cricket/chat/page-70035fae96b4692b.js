(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[134],{3719:function(e,t,s){Promise.resolve().then(s.bind(s,4194))},4194:function(e,t,s){"use strict";s.d(t,{ChatFullPage:function(){return o}});var a=s(7437),n=s(2265),i=s(6884),r=s(9590),c=s(6706),l=s(994);function o(){let[e,t]=(0,n.useState)([]),[s,o]=(0,n.useState)(""),[d,h]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!0),[p,g]=(0,n.useState)(!1),f=(0,n.useRef)(null),x=(0,n.useRef)(null),k=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=localStorage.getItem("cricket-chat-messages");e?t(JSON.parse(e)):t([{id:1,type:"ai",content:'Hello! I\'m your cricket assistant for Caroline Springs Cricket Club. I can help you with:\n\n**Player Information:** "Which team is John Smith in?"\n**Player Stats:** "How many runs did Jane Doe score last match?"\n**Fixtures:** "List all fixtures for Caroline Springs Blue U10"\n**Ladder Position:** "Where are Caroline Springs Blue U10 on the ladder?"\n**Next Match:** "When is the next game for Caroline Springs White U10?"\n**Team Roster:** "Who are the players for Caroline Springs Blue U10?"\n\nWhat would you like to know?',timestamp:"Just now"}])},[]),(0,n.useEffect)(()=>{e.length>0&&localStorage.setItem("cricket-chat-messages",JSON.stringify(e))},[e]);let y=()=>{var e;null===(e=f.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,n.useEffect)(()=>{u&&y()},[e,u]);let v=async()=>{if(!s.trim()||d)return;let e={id:Date.now(),type:"user",content:s,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};t(t=>[...t,e]),o(""),h(!0);let a={id:Date.now()+1,type:"ai",content:"",timestamp:"Just now",isStreaming:!0};t(e=>[...e,a]);try{let e=await fetch("https://cricket-agent-7x6g2q3xaq-uc.a.run.app/ask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:s,session_id:"web-chat"})}),a=(await e.json()).response||"Sorry, I couldn't process your request. Please try again.",n=a.split(" "),i="";for(let e=0;e<n.length;e++)await new Promise(e=>setTimeout(e,200+300*Math.random())),i+=(e>0?" ":"")+n[e],t(e=>e.map(e=>e.isStreaming?{...e,content:i}:e));t(e=>e.map(e=>e.isStreaming?{...e,isStreaming:!1,content:a}:e))}catch(e){console.error("Error calling cricket agent:",e),t(e=>e.map(e=>e.isStreaming?{...e,isStreaming:!1,content:"Sorry, I'm having trouble connecting to the cricket database. Please try again later."}:e))}finally{h(!1)}},j=e=>{navigator.clipboard.writeText(e)},N=t=>{let s=e.findIndex(e=>e.id===t);if(s>0){let t=e[s-1];if("user"===t.type){var a;o(t.content),null===(a=x.current)||void 0===a||a.focus()}}},C=e=>{t(t=>t.filter(t=>t.id!==e))};return(0,a.jsxs)("div",{className:"chat-dock chat-dock-fullpage",children:[(0,a.jsx)("div",{className:"chat-dock-header",children:(0,a.jsxs)("div",{className:"chat-dock-title",children:[(0,a.jsx)("div",{className:"chat-dock-avatar",children:(0,a.jsx)("span",{className:"avatar-icon",children:"\uD83C\uDFCF"})}),(0,a.jsxs)("div",{className:"chat-dock-info",children:[(0,a.jsx)("h3",{children:"Cricket Assistant"}),(0,a.jsx)("p",{children:"Caroline Springs Cricket Club"})]})]})}),(0,a.jsxs)("div",{className:"chat-dock-content",children:[(0,a.jsxs)("div",{className:"chat-dock-messages",ref:k,onScroll:()=>{if(!k.current)return;let{scrollTop:e,scrollHeight:t,clientHeight:s}=k.current,a=e+s>=t-10;m(a),a||p?a&&p&&g(!1):g(!0)},children:[e.map(e=>(0,a.jsxs)("div",{className:"chat-dock-message ".concat("user"===e.type?"user-message":"ai-message"),children:[(0,a.jsx)("div",{className:"chat-dock-message-avatar",children:(0,a.jsx)("span",{className:"avatar-icon",children:"user"===e.type?"\uD83D\uDC64":"\uD83C\uDFCF"})}),(0,a.jsxs)("div",{className:"chat-dock-message-content",children:[(0,a.jsx)("div",{className:"chat-dock-message-text",children:e.isStreaming?(0,a.jsxs)("div",{className:"streaming-content",children:[e.content,(0,a.jsx)("span",{className:"streaming-cursor",children:"|"})]}):e.content.split("\n").map((e,t)=>e.startsWith("**")&&e.endsWith("**")?(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:e.slice(2,-2)})},t):""===e.trim()?(0,a.jsx)("br",{},t):(0,a.jsx)("p",{children:e},t))}),(0,a.jsxs)("div",{className:"chat-dock-message-actions",children:[(0,a.jsx)("button",{className:"message-action",onClick:()=>j(e.content),"aria-label":"Copy message",children:(0,a.jsx)(i.Z,{size:14})}),"ai"===e.type&&!e.isStreaming&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"message-action",onClick:()=>N(e.id),"aria-label":"Retry message",children:(0,a.jsx)(r.Z,{size:14})}),(0,a.jsx)("button",{className:"message-action",onClick:()=>C(e.id),"aria-label":"Regenerate message",children:(0,a.jsx)(c.Z,{size:14})})]})]}),(0,a.jsx)("div",{className:"chat-dock-message-time",children:e.timestamp})]})]},e.id)),d&&(0,a.jsxs)("div",{className:"chat-dock-message ai-message",children:[(0,a.jsx)("div",{className:"chat-dock-message-avatar",children:(0,a.jsx)("span",{className:"avatar-icon",children:"\uD83C\uDFCF"})}),(0,a.jsx)("div",{className:"chat-dock-message-content",children:(0,a.jsxs)("div",{className:"chat-dock-message-typing",children:[(0,a.jsx)("span",{children:"Cricket Assistant is typing"}),(0,a.jsxs)("div",{className:"typing-dots",children:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{}),(0,a.jsx)("span",{})]})]})})]}),(0,a.jsx)("div",{ref:f})]}),p&&(0,a.jsx)("button",{className:"new-messages-pill",onClick:()=>{y(),g(!1)},children:"New messages"}),(0,a.jsx)("div",{className:"chat-dock-input",children:(0,a.jsxs)("div",{className:"chat-dock-input-wrapper",children:[(0,a.jsx)("input",{ref:x,type:"text",className:"chat-dock-input-field",placeholder:"Ask about fixtures, players, ladder positions...",value:s,onChange:e=>o(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),v())},disabled:d,autoComplete:"off"}),(0,a.jsx)("button",{className:"chat-dock-send",onClick:v,disabled:!s.trim()||d,"aria-label":"Send message",children:(0,a.jsx)(l.Z,{size:16})})]})})]})]})}},8030:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2265);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ")};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:n=24,strokeWidth:c=2,absoluteStrokeWidth:l,className:o="",children:d,iconNode:h,...u}=e;return(0,a.createElement)("svg",{ref:t,...r,width:n,height:n,stroke:s,strokeWidth:l?24*Number(c)/Number(n):c,className:i("lucide",o),...u},[...h.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),l=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{className:l,...o}=s;return(0,a.createElement)(c,{ref:r,iconNode:t,className:i("lucide-".concat(n(e)),l),...o})});return s.displayName="".concat(e),s}},6884:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},6706:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},9590:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},994:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])}},function(e){e.O(0,[971,23,744],function(){return e(e.s=3719)}),_N_E=e.O()}]);